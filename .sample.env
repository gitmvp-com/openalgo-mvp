# OpenAlgo MVP Environment Configuration
# Version: 1.0.0
# 
# IMPORTANT: Copy this file to .env and update with your values
# NEVER commit .env to version control!
ENV_CONFIG_VERSION='1.0.0'

# ==============================================================================
# SECURITY CONFIGURATION (CRITICAL - MUST CHANGE!)
# ==============================================================================

# OpenAlgo Application Key
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
APP_KEY='CHANGE_ME_GENERATE_NEW_KEY_HERE'

# Security Pepper - Used for hashing/encryption
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
API_KEY_PEPPER='CHANGE_ME_GENERATE_NEW_KEY_HERE'

# ==============================================================================
# BROKER CONFIGURATION
# ==============================================================================

# Broker API Credentials
BROKER_API_KEY='YOUR_BROKER_API_KEY'
BROKER_API_SECRET='YOUR_BROKER_API_SECRET'

# Market Data Configuration (Optional - Required only for XTS API brokers)
BROKER_API_KEY_MARKET='YOUR_BROKER_MARKET_API_KEY'
BROKER_API_SECRET_MARKET='YOUR_BROKER_MARKET_API_SECRET'

# OAuth Redirect URL (update with your domain)
REDIRECT_URL='http://127.0.0.1:5000/<broker>/callback'

# Valid Brokers (comma-separated list)
VALID_BROKERS='fivepaisa,fivepaisaxts,aliceblue,angel,compositedge,dhan,dhan_sandbox,definedge,firstock,flattrade,fyers,groww,ibulls,iifl,indmoney,kotak,motilal,paytm,pocketful,shoonya,tradejini,upstox,wisdom,zebu,zerodha'

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

DATABASE_URL='sqlite:///db/openalgo.db'
LATENCY_DATABASE_URL='sqlite:///db/latency.db'
LOGS_DATABASE_URL='sqlite:///db/logs.db'
SANDBOX_DATABASE_URL='sqlite:///db/sandbox.db'

# ==============================================================================
# SERVER CONFIGURATION
# ==============================================================================

# Flask Configuration
FLASK_HOST_IP='127.0.0.1'
FLASK_PORT='5000'
FLASK_DEBUG='False'
FLASK_ENV='development'

# Host Server URL (change to your domain in production)
HOST_SERVER='http://127.0.0.1:5000'

# Ngrok Configuration (for development/testing)
NGROK_ALLOW='FALSE'

# ==============================================================================
# WEBSOCKET CONFIGURATION
# ==============================================================================

# WebSocket Server (use explicit IPv4 for macOS compatibility)
WEBSOCKET_HOST='127.0.0.1'
WEBSOCKET_PORT='8765'
WEBSOCKET_URL='ws://127.0.0.1:8765'

# ZeroMQ Configuration
ZMQ_HOST='127.0.0.1'
ZMQ_PORT='5555'

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================

LOG_TO_FILE='False'
LOG_LEVEL='INFO'
LOG_DIR='log'
LOG_FORMAT='[%(asctime)s] %(levelname)s in %(module)s: %(message)s'
LOG_RETENTION='14'
LOG_COLORS='True'
FORCE_COLOR='1'

# ==============================================================================
# RATE LIMITING
# ==============================================================================

LOGIN_RATE_LIMIT_MIN='5 per minute'
LOGIN_RATE_LIMIT_HOUR='25 per hour'
RESET_RATE_LIMIT='15 per hour'
API_RATE_LIMIT='50 per second'
ORDER_RATE_LIMIT='10 per second'
SMART_ORDER_RATE_LIMIT='2 per second'
WEBHOOK_RATE_LIMIT='100 per minute'
STRATEGY_RATE_LIMIT='200 per minute'

# ==============================================================================
# API CONFIGURATION
# ==============================================================================

# Smart Order Delay (seconds between multi-leg orders)
SMART_ORDER_DELAY='0.5'

# Session Expiry Time (24-hour format, IST)
SESSION_EXPIRY_TIME='03:00'

# ==============================================================================
# CORS CONFIGURATION
# ==============================================================================

CORS_ENABLED='TRUE'
CORS_ALLOWED_ORIGINS='http://127.0.0.1:5000'
CORS_ALLOWED_METHODS='GET,POST,DELETE,PUT,PATCH'
CORS_ALLOWED_HEADERS='Content-Type,Authorization,X-Requested-With'
CORS_EXPOSED_HEADERS=''
CORS_ALLOW_CREDENTIALS='FALSE'
CORS_MAX_AGE='86400'

# ==============================================================================
# CONTENT SECURITY POLICY (CSP)
# ==============================================================================

CSP_ENABLED='TRUE'
CSP_REPORT_ONLY='FALSE'
CSP_DEFAULT_SRC="'self'"
CSP_SCRIPT_SRC="'self' 'unsafe-inline' https://cdn.socket.io https://static.cloudflareinsights.com"
CSP_STYLE_SRC="'self' 'unsafe-inline'"
CSP_IMG_SRC="'self' data:"
CSP_CONNECT_SRC="'self' wss: ws: https://cdn.socket.io"
CSP_FONT_SRC="'self'"
CSP_OBJECT_SRC="'none'"
CSP_MEDIA_SRC="'self' data: https://*.amazonaws.com https://*.cloudfront.net"
CSP_FRAME_SRC="'self'"
CSP_FORM_ACTION="'self'"
CSP_FRAME_ANCESTORS="'self'"
CSP_BASE_URI="'self'"
CSP_UPGRADE_INSECURE_REQUESTS='FALSE'
CSP_REPORT_URI=''

# ==============================================================================
# CSRF CONFIGURATION
# ==============================================================================

CSRF_ENABLED='TRUE'
CSRF_TIME_LIMIT=''

# ==============================================================================
# COOKIE CONFIGURATION
# ==============================================================================

SESSION_COOKIE_NAME='session'
CSRF_COOKIE_NAME='csrf_token'
